<script setup>
const works = reactive([
  {
    title: 'è’”æ ½',
    type: 'ç·šä¸Šè³¼ç‰©ç¶²ç«™',
    dep: 'å¾å¾Œç«¯åˆ°å‰ç«¯éƒ½ç”±æˆ‘ç¨ç«‹è£½ä½œçš„å°å‹é›»å•†ç¶²ç«™ã€‚<br />å¾Œç«¯ä½¿ç”¨äº†Express.js æ­é… Mongodbï¼Œä¸¦ä¸²æ¥äº† imgur ç”¨ç‚ºåœ–ç‰‡å„²å­˜ï¼Œå‰ç«¯å‰‡ä½¿ç”¨ Nuxt.js æ­é… piniaï¼Œä¸¦è©¦è‘—ä½¿ç”¨ Nuxt çš„ useCookie() å°‡è³¼ç‰©è»ŠåŠç™»å…¥ç´€éŒ„æŒä¹…åŒ–ï¼Œé‡‘æµå‰‡å˜—è©¦ä¸²æ¥ Line pay ( sandbox )ã€‚<br />åŠŸèƒ½åŒ…å«è¨»å†Šæœƒå“¡ã€è³¼ç‰©è»Šã€çµå¸³ã€æŸ¥çœ‹è¨‚å–® ...ç­‰ã€‚',
    src: '/web_gif_01.gif',
    links: [
      {
        name: 'ä½œå“é€£çµ',
        link: 'https://shop.baiyan777.com/'
      },
      {
        name: 'Github',
        link: 'https://github.com/baiyan412048/plants'
      }
    ]
  },
  {
    title: 'ä¹…å‹æ——å¹Ÿ',
    type: 'ç·šä¸Šè³¼ç‰©ç¶²ç«™',
    dep: 'æ­¤å°ˆæ¡ˆçš„ç‰¹æ®Šéœ€æ±‚ç‚ºç·šä¸Šå®¢è£½æ——å¹Ÿæ¨£å¼ã€‚<br />æˆ‘ä½¿ç”¨ Fabric.js åšç‚ºåŸºåº•æ‰“é€ ç·šä¸Šå®¢è£½çš„åŠŸèƒ½ï¼Œä½¿ç”¨è€…å®Œæˆå®¢è£½å¾Œï¼Œæœƒå°‡ canvas è½‰æ›ç‚º png å† POST çµ¦å¾Œç«¯ç´€éŒ„ã€‚<br />ä½¿ç”¨è€…çš„æ“ä½œä¹Ÿéœ€è¨˜éŒ„ä¸‹ä¾†ï¼Œåœ¨è³¼ç‰©è»Šçš„åœ°æ–¹å¯å†æ¬¡å›åˆ°ç”¢å“åšç·¨è¼¯ã€‚',
    src: '/web_gif_02.gif',
    links: [
      {
        name: 'å°ˆæ¡ˆé€£çµ',
        link: 'https://www.jsflag.com/tw'
      }
    ]
  },
  {
    title: 'å…ƒå¤ªç§‘æŠ€ ESG',
    type: 'å½¢è±¡ç¶²ç«™',
    dep: 'åŸºæœ¬çš„å½¢è±¡ç¶²ç«™ï¼Œè¼ƒè‘—é‡åœ¨ç‰©ä»¶çš„é€²å ´æ•ˆæœåŠäº’å‹•æ•ˆæœã€‚',
    src: '/web_capture_03.jpeg',
    links: [
      {
        name: 'å°ˆæ¡ˆé€£çµ',
        link: 'https://esg.eink.com/tw'
      }
    ]
  },
  {
    title: 'å…ƒå¤ªç§‘æŠ€å½¢è±¡ç¶²ç«™',
    type: 'å½¢è±¡ç¶²ç«™',
    dep: 'æŠ•è³‡äººå°ˆå€æœ‰å¤§é‡çš„è¡¨æ ¼ï¼Œæœ‰ç‰¹åˆ¥å¯«äº† CSS æ¨£æ¿æ–¹ä¾¿åˆ‡ç‰ˆåŸ·è¡Œï¼Œä»¥åŠé‡å°ä¸åŒçš„è¡¨æ ¼è£½ä½œä¸åŒçš„ RWD æ¨£å¼',
    src: '/web_capture_04.jpeg',
    links: [
      {
        name: 'å°ˆæ¡ˆé€£çµ',
        link: 'https://tw.eink.com'
      }
    ]
  },
  {
    title: 'å…ƒå¤ªç§‘æŠ€è³¼ç‰©ç¶²ç«™',
    type: 'ç·šä¸Šè³¼ç‰©ç¶²ç«™',
    dep: 'å…ƒå¤ªç§‘æŠ€ä¸‰å€‹å°ˆæ¡ˆå‰›å¥½éƒ½ç”±æˆ‘è² è²¬ï¼Œéƒ¨åˆ†çš„æ¨£å¼çš†æœ‰æ²¿ç”¨ï¼Œåœ¨å‰æœŸå°±å·²ç¶“è¦åŠƒå¥½å…±ç”¨æ¨£æ¿çš„è£½ä½œï¼ŒåŠ é€Ÿå®Œæˆç¶²ç«™åˆ‡ç‰ˆã€‚',
    src: '/web_gif_05.gif',
    links: [
      {
        name: 'å°ˆæ¡ˆé€£çµ',
        link: 'https://shopkits.eink.com/en/product'
      }
    ]
  }
])

// éŒ¨é»åˆ¤æ–·å€é–“é™£åˆ—
const anchorPoints = reactive([])
// éŒ¨é»åˆ¤æ–·å€é–“äº‹ä»¶
const anchorFollow = () => {
  const scrollTop = window.scrollY

  // ç”±åº•é–‹å§‹åˆ¤æ–·
  // Array.some() return true ä¸­æ–·
  anchorPoints.reverse().some(({ target, start, end }) => {
    if (scrollTop >= start && scrollTop <= end) {
      const $control = document.querySelectorAll('[anchor-control]')
      const name = target.getAttribute('anchor-target')

      $control.forEach((el) => el.classList.remove('active'))
      $control.forEach((el) => {
        if (el.getAttribute('anchor-control') == name) {
          el.classList.add('active')
        }
      })
      return true
    }
  })
}

// éŒ¨é»é»æ“Šäº‹ä»¶
const anchorMethod = (target) => {
  window.scrollTo({
    top: document.querySelector(`[anchor-target="${target}"]`).offsetTop - 20,
    behavior: 'smooth'
  })
}

// ä½œå“ Emoji å‹•ç•«
// Emoji Array
const emojis = reactive(['ğŸ‘»', 'ğŸ‘º', 'ğŸ’€', 'ğŸ˜', 'ğŸ§ ', 'ğŸ‘…', 'ğŸ¥³', 'ğŸ˜»', 'ğŸ’¯'])
// Emoji fonts size
const fonts = reactive(['30px', '32px', '34px', '36px', '38px', '40px'])
// Emoji mouseenter
const worksEmojiEnter = ($event) => {
  const $target = $event.target
  // åŠ å…¥çµæ§‹
  $target.insertAdjacentHTML(
    'beforeEnd',
    `<div class='emoji'><span>${
      emojis[(Math.random() * emojis.length) | 0]
    }</span></div>`
  )
  // top
  $target.querySelector('.emoji').style.top = `${
    ((Math.random() * $target.offsetHeight) | 0) + 1
  }px`
  // left
  $target.querySelector('.emoji').style.left = `${
    ((Math.random() * $target.offsetWidth) | 0) + 1
  }px`
  // font size
  $target.querySelector('.emoji').style.fontSize =
    fonts[(Math.random() * fonts.length) | 0]
  // opacity
  $target.querySelector('.emoji').style.opacity = 1
  // transform
  $target.querySelector('.emoji').style.transform = `rotate(${
    ((Math.random() * (10 + 10)) | 0) - 10
  }deg)`
}
// Emoji mouseleave
const worksEmojiLeave = ($event) => {
  $event.target.querySelector('.emoji').remove()
}

// go top
const goTop = () => {
  window.scrollTo({
    top: 0,
    behavior: 'smooth'
  })
}

onBeforeMount(() => {
  window.removeEventListener('scroll', anchorFollow)
})

onMounted(() => {
  // è¨ˆç®—åˆ¤æ–·å€é–“
  anchorPoints.push(
    ...[...document.querySelectorAll('[anchor-target]')].map((el) => {
      return {
        target: el,
        start: el.offsetTop - window.innerHeight / 2,
        end: el.offsetTop + el.offsetHeight - window.innerHeight / 2
      }
    })
  )

  // åˆå§‹æ¨£å¼
  anchorFollow()
  // ç¶å®šå·è»¸äº‹ä»¶
  window.addEventListener('scroll', anchorFollow)

  // é€²å ´å‹•ç•«
  const callback = (entries) => {
    entries.forEach((entry) => {
      const { target, isIntersecting } = entry
      if (isIntersecting) {
        target.classList.add('active')
      }
    })
  }
  const observer = new IntersectionObserver(callback, {
    threshold: 0.1
  })
  document.querySelectorAll('[observer]').forEach((el) => {
    observer.observe(el)
  })
})

useHead({
  title: 'RESUMES | Baiyan777'
})
</script>

<template>
  <div class="background"></div>
  <div class="elevator">
    <ul>
      <li anchor-control="intro" @click="anchorMethod('intro')">ç°¡ä»‹</li>
      <li anchor-control="skill" @click="anchorMethod('skill')">æŠ€è¡“</li>
      <li anchor-control="works" @click="anchorMethod('works')">ä½œå“</li>
    </ul>
  </div>
  <div class="outer">
    <div class="heading" observer>
      <div class="wrapper">
        <div class="corner">
          <span></span>
          <span></span>
          <span></span>
          <span></span>
        </div>
        <p class="date">2023 / 06 / 11</p>
        <h1 class="title">
          <span>RESUMES</span>
        </h1>
      </div>
    </div>
    <div class="intro" observer anchor-target="intro">
      <div class="wrapper">
        <div class="corner">
          <span></span>
          <span></span>
          <span></span>
          <span></span>
        </div>
        <div class="container">
          <div class="shot">
            <img src="/pic.jpg" loading="lazy" alt="" />
            <div class="emoji">
              <span class="ğŸ‘">ğŸ‘</span>
              <span class="â˜€ï¸">â˜€ï¸</span>
            </div>
          </div>
          <p class="text">
            æˆ‘æ˜¯ é™³è–å…ƒ / Eric chen<br /><br />
            å•†æ¥­è¨­è¨ˆç³»ç•¢æ¥­å¾Œå°±é¦¬ä¸Šé€²å…¥ç¾ç·¨çš„å·¥ä½œï¼Œåœ¨å·¥ä½œçš„éç¨‹ä¸­æ¥è§¸åˆ°ç¶²é ç›¸é—œçš„é ˜åŸŸå¾Œï¼Œå°±å°ç¶²é ç”¢ç”Ÿäº†èˆˆè¶£ï¼Œä¾¿æŠ•å…¥æ–¼å­¸ç¿’ä¸­ã€‚<br /><br />
            å¾Œä¾†å¾ˆå¹¸é‹çš„é€²å…¥äº†å¨å¾·æ•¸ä½è¨­è¨ˆæ“”ä»»å‰ç«¯å·¥ç¨‹å¸«ï¼Œç´¯ç©äº†å¾ˆå¤šçš„ä½œå“åŠç¶“é©—ï¼Œåœ¨èˆ‡åœ˜éšŠçš„åˆä½œä¹‹ä¸‹ï¼Œç”¢å‡ºä¸å°‘å½¢è±¡åŠè³¼ç‰©ç¶²ç«™ï¼Œä¹Ÿå¯«äº†å„ç¨®å°å·¥å…·è‡´åŠ›æ–¼åŠ é€Ÿè£½ä½œç¶²ç«™çš„é€Ÿåº¦ï¼Œå¾ŒæœŸä¹Ÿå”åŠ©æ–°é€²äººå“¡èƒ½å¿«é€Ÿçš„é©æ‡‰å·¥ä½œç’°å¢ƒåŠè§£æ±ºåˆæœŸé‡åˆ°çš„å•é¡Œã€‚<br /><br />
            <span><Icon name="ri:road-map-line" />ã€€å°ç£ Â· å°ä¸­å¸‚</span>
            <br />
            <span>
              <a href="mailto:baiyanchen0214@gmail.com">
                <Icon name="ri:mail-line" />ã€€baiyanchen0214@gmail.com</a
              >
            </span>
            <br />
            <span><Icon name="ri:phone-line" />ã€€0980381643</span>
          </p>
        </div>
      </div>
    </div>
    <div class="skill" observer anchor-target="skill">
      <div class="wrapper">
        <div class="corner">
          <span></span>
          <span></span>
          <span></span>
          <span></span>
        </div>
        <div class="container">
          <div class="group">
            <p class="title">Front-end</p>
            <p class="dep">
              å¯ç¨ç«‹ä¾ç…§è¨­è¨ˆç¨¿åˆ‡ç‰ˆï¼Œä¸¦è£½ä½œ RWD ç¶²ç«™ã€‚<br />
              èƒ½ç¨ç«‹é–‹ç™¼å°ˆæ¡ˆä¸­çš„ç‰¹æ®ŠåŠŸèƒ½éœ€æ±‚ã€‚<br />
              èƒ½ä¸²æ¥ APIï¼Œä¸¦èˆ‡å¾Œç«¯æºé€šæ¬„ä½èª¿æ•´ã€‚
            </p>
            <ul>
              <li>HTML5</li>
              <li>CSS3</li>
              <li>JavaScript</li>
              <li>Vue3</li>
              <li>Nuxt.js</li>
            </ul>
          </div>
          <div class="group">
            <p class="title">Back-end</p>
            <p class="dep">ç¨ç«‹è¨­è¨ˆè³‡æ–™åº«æ¬„ä½ï¼Œä¸¦åˆ¶å®š API è·¯ç”±</p>
            <ul>
              <li>Node.js</li>
              <li>Express.js</li>
              <li>Mongodb</li>
              <li>RESTful API</li>
            </ul>
          </div>
          <div class="group">
            <p class="title">Other</p>
            <ul>
              <li>Git</li>
              <li>Postman</li>
              <li>Figma</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="works" observer anchor-target="works">
      <div class="wrapper">
        <div class="corner">
          <span></span>
          <span></span>
          <span></span>
          <span></span>
        </div>
        <div class="container">
          <p class="tip">
            <span>ä½œå“ & å°ˆæ¡ˆ</span>
          </p>
          <ul>
            <li v-for="(item, key) in works" :key="key">
              <div class="head">
                <span class="type">{{ item.type }}</span>
                <span class="index"></span>
              </div>
              <p class="title">
                <a :href="item.links[0].link" target="_blank">
                  {{ item.title }}
                </a>
              </p>
              <a
                class="photo"
                :href="item.links[0].link"
                target="_blank"
                @mouseenter="worksEmojiEnter"
                @mouseleave="worksEmojiLeave"
              >
                <img :src="item.src" loading="lazy" alt="" />
              </a>
              <div class="content">
                <p class="dep" v-html="item.dep"></p>
                <div class="links">
                  <a
                    v-for="(a, index) in item.links"
                    :key="index"
                    :href="a.link"
                    target="_blank"
                  >
                    <Icon v-if="a.name == 'Github'" name="ri:github-line" />
                    <Icon v-else name="ri:link-m" />
                    {{ a.name }}
                  </a>
                </div>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="footer">
      <div class="wrapper">
        <div class="container">
          <div class="to-top" @click="goTop">
            <Icon name="ri:arrow-up-line" />
          </div>
          <a href="https://github.com/baiyan412048">site by baiyan412048</a>
        </div>
      </div>
    </div>
  </div>
</template>

<style lang="sass">
@import '@/assets/base/_variable.sass'
@import '@/assets/base/_mixin.sass'
@import '@/assets/base/_function.sass'

body
  padding: 30px
  background: $gray url(./public/background.jpg)
  background-size: 300px 300px
  background-repeat: repeat
  font-family: $sans
  font-weight: 500
  line-height: 1.6

.elevator
  padding: 10px
  position: fixed
  bottom: 10px
  right: 10px
  border-radius: 10px
  background-color: rgba(#fff, .5)
  backdrop-filter: blur(1px)
  li
    padding: 10px 20px
    border-radius: 10px
    font-size: px(14)
    cursor: pointer
    transition: background .2s
    &:not(:last-child)
      margin-bottom: 10px
    +hover
      background-color: rgba($yellow, .8)
    &.active
      background-color: rgba($yellow, .8)

.outer
  margin: 0 auto
  max-width: 960px
  width: 100%
  .wrapper
    padding: 40px
    position: relative
  .corner
    position: absolute
    top: 0
    left: 0
    z-index: -1
    width: 100%
    height: 100%
    pointer-events: none
    span
      position: absolute
      width: 20px
      height: 20px
      background-color: $yellow
      &::before
        position: absolute
        top: 0
        left: 0
        background: $gray url(./public/background.jpg)
        background-size: 300px 300px
        background-repeat: repeat
        width: 100%
        height: 100%
        content: ''
      &:nth-child(1)
        top: 0
        left: 0
        &::before
          border-radius: 500px 0 0 0
      &:nth-child(2)
        top: 0
        right: 0
        &::before
          border-radius: 0 500px 0 0
      &:nth-child(3)
        bottom: 0
        left: 0
        &::before
          border-radius: 0 0 0 500px
      &:nth-child(4)
        bottom: 0
        right: 0
        &::before
          border-radius: 0 0 500px 0

.heading
  &.active
    .title
      &::before
        max-width: 400px
        transition: max-width 1s .2s cubic-bezier(0.22, 1, 0.36, 1)
      span
        opacity: 1
        transition: opacity .4s
  .date
    margin-bottom: 10px
    font-size: px(20)
    font-family: $one
    text-align: center
    letter-spacing: 10px
  .title
    position: relative
    z-index: 1
    font-size: px(100)
    line-height: 1
    font-family: $one
    text-align: center
    letter-spacing: 5px
    &::before
      position: absolute
      top: 50%
      left: 50%
      transform: translate3d(-50%, -50%, 0)
      z-index: -1
      display: block
      background-color: $yellow
      max-width: 0
      width: 100%
      height: 30px
      content: ''
    span
      opacity: 0

.intro
  &.active
    .shot
      &::before
        opacity: .15
        transition: opacity .4s
    .text
      opacity: 1
      transition: opacity .4s
  .container
    display: flex
    gap: 40px
  .shot
    position: relative
    flex-shrink: 0
    border: 4px solid $yellow
    border-radius: 15px
    aspect-ratio: 200 / 250
    max-width: 220px
    width: 100%
    +hover
      .emoji
        .ğŸ‘
          opacity: 1
          transform: rotate(-15deg) translateZ(0)
        .â˜€ï¸
          opacity: 1
          transform: translateZ(0)
    &::before
      position: absolute
      top: 0
      left: 0
      z-index: 1
      display: block
      background-color: $yellow
      width: 100%
      height: 100%
      content: ''
    img
      border-radius: 10px
      display: block
      width: 100%
      height: 100%
      object-fit: cover
  .emoji
    position: absolute
    top: 0
    left: 0
    z-index: 2
    width: 100%
    height: 100%
    font-family: emoji
    .ğŸ‘
      position: absolute
      bottom: 5%
      left: -10%
      transform: rotate(15deg) translate3d(15px, 15px, 0)
      font-size: px(38)
      opacity: 0
      transition: opacity .4s, transform .4s
    .â˜€ï¸
      position: absolute
      top: 5%
      right: -7%
      font-size: px(32)
      transform: translate3d(10px, -10px, 0)
      opacity: 0
      transition: opacity .4s, transform .4s
  .text
    opacity: 0
    span
      font-size: px(14)

.skill
  &.active
    .group
      opacity: 1
      transform: translateZ(0)
      transition: opacity .6s, transform .6s
      &:nth-child(2)
        transition-delay: .2s
      &:nth-child(3)
        transition-delay: .4s
  .container
    display: flex
    gap: 20px
  .group
    opacity: 0
    transform: translate3d(0, 10px, 0)
    width: calc((100% - 40px) / 3)
  .title
    padding: 0 10px
    display: inline-block
    background-color: rgba($yellow, .5)
    font-size: px(20)
    font-family: $serif
    font-weight: 700
  .dep
    margin-top: 10px
    font-size: px(14)
  ul
    margin-top: 10px
  li
    display: flex
    align-items: center
    &::before
      margin-right: 8px
      display: block
      border-radius: 500px
      background-color: $yellow
      width: 4px
      height: 4px
      content: ''

.works
  &.active
    .tip
      span
        &::before
          transform: translate3d(-15px, -5px, 0) scale(1)
          transition: transform .8s
    .head
      &::before
        width: 100%
        transition: width .6s .4s
      .type
        &::after
          height: 100%
          transition: height .6s .2s
    .title,
    .photo,
    .content
      opacity: 1
      transform: translateZ(0)
      transition: opacity .8s, transform .8s
    .title
      transition-delay: .6s
    .photo
      transition-delay: .7s
    .content
      transition-delay: .8s

  .tip
    margin-bottom: 30px
    font-size: px(24)
    font-family: $serif
    text-align: center
    span
      position: relative
      z-index: 1
      display: inline-block
      &::before
        position: absolute
        top: 0
        left: 0
        transform: translate3d(-15px, -5px, 0) scale(0)
        z-index: -1
        display: block
        border-radius: 500px
        background-color: $yellow
        width: 30px
        height: 30px
        content: ''
  ul
    display: flex
    gap: 40px
    flex-wrap: wrap
    counter-reset: li
  li
    width: calc((100% - 40px) / 2)
    counter-increment: li
    // &:nth-child(odd)
    &:nth-child(even)
      .group
        flex-direction: row-reverse
  .head
    margin-bottom: 20px
    padding: 10px 0
    position: relative
    display: flex
    align-items: center
    &::before
      position: absolute
      bottom: 0
      left: 0
      display: block
      background-color: rgba($black, .5)
      width: 0
      height: 1px
      content: ''
    span
      width: 50%
    .type
      position: relative
      // border-right: 1px solid rgba($black, .5)
      text-align: center
      &::after
        position: absolute
        top: 0
        right: 0
        display: block
        background-color: rgba($black, .5)
        width: 1px
        height: 0
        content: ''
    .index
      &::before
        display: block
        font-size: px(32)
        font-family: 'Concert One', cursive
        line-height: 1
        text-align: center
        content: '#'counter(li, decimal-leading-zero)
  .title
    margin-bottom: 20px
    font-size: px(24)
    font-family: $serif
    text-align: center
    opacity: 0
    transform: translate3d(0, 10px, 0)
  .photo
    position: relative
    display: block
    flex-shrink: 0
    width: 100%
    aspect-ratio: 16 / 9
    opacity: 0
    transform: translate3d(0, 10px, 0)
    img
      display: block
      width: 100%
      height: 100%
      border-radius: 10px
      object-fit: cover
      object-position: center top
  .emoji
    position: absolute
    opacity: 0
    transition: opacity .4s
    span
      display: block
      transform: translate3d(-50%, -50%, 0)
  .content
    margin-top: 20px
    padding: 0 10px
    opacity: 0
    transform: translate3d(0, 10px, 0)
  .dep
    font-size: px(14)
  .links
    margin-top: 20px
    display: flex
    gap: 20px

.footer
  margin-top: 20px
  font-size: px(14)
  text-align: center
  .wrapper
    padding-top: 10px
    background: url(./public/background_ground.png)
    background-size: cover
    background-repeat: no-repeat
    background-position: center 72%
  .container
    display: flex
    align-items: center
    justify-content: center
    flex-direction: column
  .to-top
    display: inline-block
    font-size: px(20)
    cursor: pointer
</style>
